!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Aontu=e()}}((function(){var e={exports:{}};(function(n){(function(){!function(t){"object"==typeof e.exports?e.exports=t():("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).Jsonic=t()}((function(){var e={exports:{}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.make=e.exports.util=e.exports.Alt=e.exports.RuleSpec=e.exports.Rule=e.exports.Parser=e.exports.Lexer=e.exports.JsonicError=e.exports.Jsonic=void 0;const n=Object.keys,t=Object.assign,r=Object.defineProperty,s="object",o="string",l="function",i="unexpected",a="map",c="list",u="elem",p="pair",d="val",h="block_indent_",f="imp,map",g="imp,list",m="imp,null",b="open",v="close",x="null";class y extends SyntaxError{constructor(e,n,r,s,o){let l=H(e,n=L({},n),r,s,o);super(l.message),t(this,l),B(this)}toJSON(){return{...this,__error:!0,name:this.name,message:this.message,stack:this.stack}}}e.exports.JsonicError=y;class w{constructor(e){this.match={},E("@LTP",e),E("@LTX",e),E("@LCS",e),E("@LML",e),this.end={tin:E("#ZZ",e),loc:0,len:0,row:0,col:0,val:void 0,src:void 0}}start(e){const t=e.opts,r=e.cnfg;let s=e=>E(e,r),o=e=>E(e,r),l=e.F,a=s("@LTP"),c=s("@LTX"),u=s("@LCS"),p=s("@LML"),d=s("#ZZ"),f=s("#SP"),g=s("#CM"),m=s("#NR"),b=s("#ST"),v=s("#TX"),x=s("#VL"),y=s("#LN"),w={tin:d,loc:0,row:0,col:0,len:0,val:void 0,src:void 0},k=0,j=0,S=0,C=a,N=null,A=e.src(),T=A.length,_=null!=e.log?(...n)=>e.log("lex",o(w.tin),l(w.src),k,j+":"+S,o(C),{...w},...n):void 0,V=(n,t,r,s)=>this.bad(e,_,n,w,k,t,j,S,r,r,s),O=n=>{let t=this.match[C];if(null!=t)for(let r of t){let t=r({sI:k,rI:j,cI:S,src:A,token:w,ctx:e,rule:n,bad:V});if(t)return k=t.sI?t.sI:k,j=t.rI?t.rI:j,S=t.cI?t.cI:S,C=null==t.state?C:t.state,N=null==t.state_param?N:t.state_param,_&&_(w,r),w}},I=function(s){w.len=0,w.val=void 0,w.src=void 0,w.row=j,w.use=void 0;let o={},l=0,I=[];e:for(;k<T;){let d=A[k];if(w.loc=k,w.col=S,e.xs=C,a!==C){if(c===C){if(O(s))return w;l=k;let e=A.substring(k).match(r.re.te);if(e){let n=e[0].length;l+=n,S+=n}return w.len=l-k,w.tin=v,w.val=A.substring(k,l),w.src=w.val,k=l,C=a,_&&_(w),w}if(u===C){if(O(s))return w;for(l=k;l<T&&!o[A[l]];)l++,S++;return w.val+=A.substring(k,l),w.src=w.val,w.len=w.val.length,k=l,C=a,_&&_(w),w}if(p===C){if(O(s))return w;l=k;let e=1,o=N[0],i=N[1],c=N[2],u=!!N[3],p="",d=0,f=o.length,g=i.length;if(u){let e=k-1;for(;-1<e&&r.m.SP[A[e]];)e--;0<(d=k-e-1)&&(p=n(r.m.SP)[0].repeat(d))}for(l+=o.length;l<T&&0<e;)i[0]===A[l]&&i===A.substring(l,l+g)?(l+=g,S+=g,e--):c&&o[0]===A[l]&&o===A.substring(l,l+f)?(l+=f,S+=g,e++):(t.line.row===A[l]?(j++,S=0):S++,l++);if(w.val=A.substring(k,l),w.src=w.val,w.len=w.val.length,u){w.val=w.val.substring(f,w.val.length-g),null==r.re.block_prefix&&(r.re.block_prefix=$("","^[",J(t.token["#SP"]),"]*(",t.line.sep,")")),w.val=w.val.replace(r.re.block_prefix,""),null==r.re.block_suffix&&(r.re.block_suffix=$("",t.line.sep,"[",J(t.token["#SP"]),"]*$")),w.val=w.val.replace(r.re.block_suffix,"");let e=r.re[h+p]=r.re[h+p]||$("g","^(",J(p),")|((",t.line.sep,")",J(p),")");w.val=w.val.replace(e,"$3")}return k=l,C=a,_&&_(w),w}return V("invalid_lex_state",k,A[k],{state:C})}if(O(s))return w;if(t.space.lex&&r.m.SP[d]){for(w.tin=f,S++,l=k+1;r.m.SP[A[l]];)S++,l++;return w.len=l-k,w.val=A.substring(k,l),w.src=w.val,k=l,_&&_(w),w}if(t.line.lex&&r.m.LN[d]){for(w.tin=y,l=k,S=0;r.m.LN[A[l]];)j+=t.line.row===A[l]?1:0,l++;return w.len=l-k,w.val=A.substring(k,l),w.src=w.val,k=l,_&&_(w),w}if(t.number.lex&&r.m.NR[d]){let e=A.substring(k).match(r.re.nm);if(null!=e){let n=e[0];if(l=k+n.length,null==A[l]||r.cs.vend[A[l]]){let e=+(r.re.ns?n.replace(r.re.ns,""):n);if(!isNaN(e))return w.tin=m,w.src=n,w.val=e,w.len=n.length,k+=w.len,S+=w.len,_&&_(w),w}}}if(null!=r.sm[d])return w.tin=r.sm[d],w.len=1,w.src=d,k++,S++,_&&_(w),w;if(t.block.lex&&r.cs.bs[d]){let e=A.substring(k,k+r.bmx);for(let n of r.bmk)if(e.startsWith(n)){w.tin=b,C=p,N=[n,t.block.marker[n],null,!0];continue e}}if(t.string.lex&&r.m.ST[d]){w.tin=b,S++;let e=r.cs.mln[d];I=[];let n="";for(l=k+1;l<T;l++)if(S++,d===(n=A[l])){if(!t.string.escapedouble||d!==A[l+1]){l++;break}I.push(A[l]),l++}else if("\\"===n){l++,S++;let e=r.esc[A[l]];if(null!=e)I.push(e);else if("x"===A[l]){l++;let e=parseInt(A.substring(l,l+2),16);if(isNaN(e))return k=l-2,S-=2,V("invalid_ascii",l+2,A.substring(l-2,l+2));let n=String.fromCharCode(e);I.push(n),l+=1,S+=2}else if("u"===A[l]){let e="{"===A[++l]?(l++,1):0,n=e?6:4,t=parseInt(A.substring(l,l+n),16);if(isNaN(t))return k=l-2-e,S-=2,V("invalid_unicode",l+n+1,A.substring(l-2-e,l+n+e));let r=String.fromCodePoint(t);I.push(r),l+=n-1+e,S+=n+e}else I.push(A[l])}else{let s=l,o=d.charCodeAt(0),i="\\".charCodeAt(0),a=A.charCodeAt(l);for(;l<T&&32<=a&&o!==a&&i!==a;)a=A.charCodeAt(++l),S++;if(S--,n=A[l],a<32){if(!e||!r.m.LN[n])return V("unprintable",l,"char-code="+A[l].charCodeAt(0));n===t.line.row&&(j++,S=0),I.push(A.substring(s,l+1))}else I.push(A.substring(s,l)),l--}return d!==n?V("unterminated",l,I.join("")):(w.val=I.join(""),w.src=A.substring(k,l),w.len=l-k,k=l,_&&_(w),w)}if(t.comment.lex&&r.cs.cs[d]){let e=A.substring(k,k+r.cmx);for(let n of r.cmk)if(e.startsWith(n)){if(!0!==r.cm[n]){w.tin=g,w.val="",C=p,N=[n,r.cm[n],t.comment.balance];continue e}break}w.tin=g,w.val="",C=u,o=r.m.LN}else{if(t.value.lex&&r.vs[d]){l=k;do{l++}while(null!=A[l]&&!r.cs.vend[A[l]]);let e=A.substring(k,l),n=r.vm[e];if(void 0!==n)return w.tin=x,w.val=n,w.src=e,w.len=l-k,S+=w.len,k=l,_&&_(w),w}if(!t.text.lex)return V(i,k,A[k]);C=c}}return w.tin=d,w.loc=T,w.col=S,_&&_(w),w};return I.src=A,I}bad(e,n,t,r,s,o,l,i,a,c,u){return r.why=t,r.tin=E("#BD",e.cnfg),r.loc=s,r.row=l,r.col=i,r.len=o-s,r.val=a,r.src=c,r.use=u,n&&n(E(r.tin,e.cnfg),e.F(r.src),s,l+":"+i,{...r},"error",t),r}lex(e,n){if(null==e)return this.match;let t=this.match[e];return null!=n?(null==t&&(t=this.match[e]=[]),t.push(n)):null===n&&(t=this.match[e],delete this.match[e]),t}clone(e){let n=new w(e);return L(n.match,this.match),n}}var k;e.exports.Lexer=w,function(e){e[e.open=0]="open",e[e.close=1]="close"}(k||(k={}));class j{constructor(e,n,t){this.id=n.uI++,this.name=e.name,this.spec=e,this.node=t,this.state=k.open,this.child=S,this.open=[],this.close=[],this.n={},this.use={},this.bo=!1!==e.bo,this.ao=!1!==e.ao,this.bc=!1!==e.bc,this.ac=!1!==e.ac}process(e){return this.spec.process(this,e,this.state)}}e.exports.Rule=j;const S={name:"none",state:0};class C{constructor(){this.m=[],this.p="",this.r="",this.b=0}}e.exports.Alt=C;const N=new C,A=new C;class T{constructor(e){function n(e){let n=null!=e.c&&e.c.n;n&&(e.c=e=>{let t=!0;for(let r in n)t=t&&(null==e.n[r]||e.n[r]<=n[r]);return t}),o===typeof e.g&&(e.g=e.g.split(/\s*,\s*/))}this.name="-",this.bo=!0,this.ao=!0,this.bc=!0,this.ac=!0,this.def=e||{},this.def.open=this.def.open||[],this.def.close=this.def.close||[];for(let t of[...this.def.open,...this.def.close])n(t)}process(e,n,t){let r,s="",o=n.F,l=t===k.open,a=l?e:S,c=this.def,u=l?c.open:c.close,p=l?e.bo&&c.bo:e.bc&&c.bc;if(p&&(r=p.call(this,e,n))){if(r.err)throw new y(r.err,{...r,state:l?b:v},n.t0,e,n);e.node=r.node||e.node}let d=r&&r.alt?{...A,...r.alt}:0<u.length?this.parse_alts(u,e,n):A;if(d.h&&(d=d.h(e,n,d,a)||d,s+="H"),l?e.open=d.m:e.close=d.m,d.e)throw new y(i,{...d.e.use,state:l?b:v},d.e,e,n);if(d.n)for(let i in d.n)e.n[i]=0===d.n[i]?0:(null==e.n[i]?0:e.n[i])+d.n[i],e.n[i]=0<e.n[i]?e.n[i]:0;d.u&&(e.use=Object.assign(e.use,d.u)),d.a&&(s+="A",d.a.call(this,e,n,d,a)),d.p?(n.rs.push(e),(a=e.child=new j(n.rsm[d.p],n,e.node)).parent=e,a.n={...e.n},s+="U"):d.r?((a=new j(n.rsm[d.r],n,e.node)).parent=e.parent,a.n={...e.n},s+="R"):(l||(a=n.rs.pop()||S),s+="Z");let h=l?e.ao&&c.ao:e.ac&&c.ac;if(h){let t=h.call(this,e,n,d,a);if(t){if(t.err)throw n.t0.why=s,new y(t.err,{...t,state:l?b:v},n.t0,e,n);a=t.next||a}}a.why=s,n.log&&n.log("node",e.name+"~"+e.id,k[e.state],"w="+s,o(e.node));let f=0,g=d.m.length-(d.b||0);for(;f++<g;)n.next();return k.open===e.state&&(e.state=k.close),a}parse_alts(e,n,t){let r,s=N;s.m=[],s.b=0,s.p="",s.r="",s.n=void 0,s.h=void 0,s.a=void 0,s.u=void 0,s.e=void 0;let o,l=0,i=t.cnfg.t,a=e.length;for(l=0;l<a&&(o=!1,null==(r=e[l]).s||0===r.s.length?o=!0:(r.s[0]===t.t0.tin||r.s[0]===i.AA||Array.isArray(r.s[0])&&r.s[0].includes(t.t0.tin))&&(1===r.s.length?(s.m=[t.t0],o=!0):(r.s[1]===t.t1.tin||r.s[1]===i.AA||Array.isArray(r.s[1])&&r.s[1].includes(t.t1.tin))&&(s.m=[t.t0,t.t1],o=!0)),!(o=(o=o&&(!r.c||r.c(n,t,s)))&&(null==r.d||r.d===t.rs.length)));l++)r=null;return null==r&&i.ZZ!==t.t0.tin&&(s.e=t.t0),null!=r&&(s.e=r.e&&r.e(n,t,s)||void 0,s.b=r.b?r.b:s.b,s.p=r.p?r.p:s.p,s.r=r.r?r.r:s.r,s.n=r.n?r.n:s.n,s.h=r.h?r.h:s.h,s.a=r.a?r.a:s.a,s.u=r.u?r.u:s.u),t.log&&t.log("parse",n.name+"~"+n.id,k[n.state],l<e.length?"alt="+l:"no-alt",l<e.length&&r.s?"["+r.s.map(e=>i[e]).join(" ")+"]":"[]",t.tC,"p="+(s.p||""),"r="+(s.r||""),"b="+(s.b||""),s.m.map(e=>i[e.tin]).join(" "),t.F(s.m.map(e=>e.src)),"c:"+(r&&r.c?o:""),"n:"+Object.entries(n.n).join(";"),"u:"+Object.entries(n.use).join(";"),s),s}}e.exports.RuleSpec=T;class _{constructor(e,n){this.rsm={},this.options=e,this.config=n}init(){let e=this.config.t,t=e.OB,r=e.CB,s=e.OS,o=e.CS,l=e.CL,i=e.CA,h=e.TX,b=e.NR,v=e.ST,y=e.VL,w=e.AA,k=e.ZZ,j=(e,n)=>{if(!this.options.rule.finish)return n.t0.src="END_OF_SOURCE",n.t0},S={val:{open:[{s:[t,i],p:a,n:{im:0},g:f},{s:[t],p:a,n:{im:0}},{s:[s],p:c},{s:[i],d:0,p:c,b:1,g:g},{s:[i],b:1,g:g},{s:[[h,b,v,y],l],p:a,b:2,n:{im:1},g:f},{s:[[h,b,v,y]]},{s:[r],b:1,g:m},{s:[o],b:1,g:m}],close:[{s:[i],d:0,r:u,a:e=>e.node=[e.node],g:g},{c:(e,n,t)=>(h===n.t0.tin||b===n.t0.tin||v===n.t0.tin||y===n.t0.tin)&&0===n.rs.length,r:u,a:e=>e.node=[e.node],g:g},{s:[w],b:1}],bc:e=>{e.node=void 0===e.child.node?null==e.open[0]?void 0:e.open[0].val:e.child.node}},map:{bo:()=>({node:{}}),open:[{s:[r]},{p:p}],close:[]},list:{bo:()=>({node:[]}),open:[{s:[o]},{p:u}],close:[]},pair:{open:[{s:[[h,b,v,y],l],p:d,u:{key:!0}},{s:[r],b:1}],close:[{s:[r]},{s:[i],c:{n:{im:1}},r:p},{s:[i],b:1},{s:[[h,b,v,y],l],c:{n:{im:1}},r:p,b:2},{s:[[h,b,v,y],l],b:2},{s:[o],b:1},{s:[k],e:j,g:"end"}],bc:(e,n)=>{if(e.use.key){let t=e.open[0],r=v===t.tin?t.val:t.src,s=e.child.node,o=e.node[r];void 0===s&&l===n.v1.tin&&(s=null),e.node[r]=null==o?s:n.opts.map.extend?L(o,s):s}}},elem:{open:[{s:[t],p:a,n:{im:0}},{s:[s],p:c},{s:[i,i],b:2,g:x,a:e=>e.node.push(null)},{s:[i],g:x,a:e=>e.node.push(null)},{p:d,n:{im:1}}],close:[{s:[i,o]},{s:[i],r:u},{s:[o]},{s:[t],p:a,n:{im:0}},{s:[s],p:c},{s:[[h,b,v,y]],r:u,b:1},{s:[k],e:j,g:"end"}],bc:e=>{void 0!==e.child.node&&e.node.push(e.child.node)}}};this.rsm=n(S).reduce((e,n)=>(e[n]=new T(S[n]),e[n].name=n,e),{})}rule(e,n){if(null==e)return this.rsm;let t=this.rsm[e];return null===n?delete this.rsm[e]:void 0!==n&&((t=this.rsm[e]=n(this.rsm[e],this.rsm)||this.rsm[e]).name=e),t}start(e,t,r,s,o){let l,a={uI:1,opts:this.options,cnfg:this.config,meta:s||{},src:()=>t,root:()=>l.node,plgn:()=>r.internal().plugins,rule:S,xs:-1,v2:e.end,v1:e.end,t0:e.end,t1:e.end,tC:-2,next:f,rs:[],rsm:this.rsm,log:s&&s.log||void 0,F:I(this.config),use:{}};null!=o&&(a=L(a,o)),D(a);let c=e=>E(e,this.config),u=U(e.start(a),E("#BD",this.config),a),p=this.rsm[this.options.rule.start];if(null==p)return;let d=new j(p,a);l=d;let h=2*n(this.rsm).length*u.src.length*2*this.options.rule.maxmul;function f(){let e;a.v2=a.v1,a.v1=a.t0,a.t0=a.t1;do{e=u(d),a.tC++}while(a.cnfg.ts.IGNORE[e.tin]);return a.t1={...e},a.t0}f(),f();let g=0;for(;S!==d&&g<h;)a.log&&a.log("rule",d.name+"~"+d.id,k[d.state],a.rs.length,a.tC,"["+c(a.t0.tin)+" "+c(a.t1.tin)+"]","["+a.F(a.t0.src)+" "+a.F(a.t1.src)+"]",d,a),a.rule=d,d=d.process(a),a.log&&a.log("stack",a.rs.length,a.rs.map(e=>e.name+"~"+e.id).join("/"),d,a),g++;if(E("#ZZ",this.config)!==a.t0.tin)throw new y(i,{},a.t0,S,a);return l.node}clone(e,n){let t=new _(e,n);return t.rsm=Object.keys(this.rsm).reduce((e,n)=>(e[n]=P(this.rsm[n]),e),{}),t}}e.exports.Parser=_;let V={tokenize:E,srcfmt:I,deep:L,clone:P,charset:R,longest:M,marr:function(e,n){return e.length===n.length&&e.reduce((e,t,r)=>e&&t===n[r],!0)},trimstk:B,makelog:D,badlex:U,extract:W,errinject:Z,errdesc:H,configure:X,parserwrap:Y,regexp:$,mesc:J,ender:F};function O(e,n){let l,i,a,c,u=L({},n?{...n.options}:{tag:"-",line:{lex:!0,row:"\n",sep:"\r*\n"},comment:{lex:!0,balance:!0,marker:{"#":!0,"//":!0,"/*":"*/"}},space:{lex:!0},number:{lex:!0,hex:!0,oct:!0,bin:!0,digital:"-1023456789._xoeEaAbBcCdDfF+",sep:"_"},block:{lex:!0,marker:{"'''":"'''"}},string:{lex:!0,escape:{b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},multiline:"`",escapedouble:!1},text:{lex:!0},map:{extend:!0},value:{lex:!0,src:{null:null,true:!0,false:!1}},plugin:{},debug:{get_console:()=>console,maxlen:99,print:{config:!1}},error:{unknown:"unknown error: $code",unexpected:"unexpected character(s): $src",invalid_unicode:"invalid unicode escape: $src",invalid_ascii:"invalid ascii escape: $src",unprintable:"unprintable character: $src",unterminated:"unterminated string: $src"},hint:G,token:{"#OB":{c:"{"},"#CB":{c:"}"},"#OS":{c:"["},"#CS":{c:"]"},"#CL":{c:":"},"#CA":{c:","},"#SP":" \t","#LN":"\n\r","#NR":"-0123456789+","#ST":"\"'`","#TX":!0,"#VL":!0,"#CM":!0,"#BD":!0,"#ZZ":!0,"#UK":!0,"#AA":!0,"#IGNORE":{s:"#SP,#LN,#CM"}},rule:{start:d,finish:!0,maxmul:3},config:{modify:{}},parser:{start:void 0}},e||{}),p=function(e,n,t){if(o===typeof e){let r=p.internal();return(h.parser.start?Y(h.parser):r.parser).start(r.lexer,e,p,n,t)}return e},h=e=>{if(null!=e&&s===typeof e){X(a,L(u,e));for(let e in u)p.options[e]=u[e];t(p.token,a.t)}return{...p.options}},f={token:function(e){return E(e,a,p)},options:L(h,u),parse:p,use:function(e,n){return p.options({plugin:{[e.name]:n||{}}}),p.internal().plugins.push(e),e(p)||p},rule:function(e,n){return p.internal().parser.rule(e,n)},lex:function(e,n){return p.internal().lexer.lex(e,n)},make:function(e){return O(e,p)},id:"Jsonic/"+Date.now()+"/"+(""+Math.random()).substring(2,8).padEnd(6,"0")+"/"+h.tag,toString:function(){return this.id}};if(r(f.make,"name",{value:"make"}),n){for(let t in n)p[t]=n[t];p.parent=n;let e=n.internal();X(a=L({},e.config),u),t(p.token,a.t),c=[...e.plugins],l=e.lexer.clone(a),i=e.parser.clone(u,a)}else X(a={tI:1,t:{}},u),c=[],l=new w(a),(i=new _(u,a)).init();return t(p,f),t(p.token,a.t),r(p,"internal",{value:function(){return{lexer:l,parser:i,config:a,plugins:c}}}),p}function I(e){return(n,t)=>null==n?"":(t=JSON.stringify(n)).substring(0,e.d.maxlen)+(e.d.maxlen<t.length?"...":"")}function E(e,n,r){let s=n.t,l=s[e];return null==l&&o===typeof e&&(s[l=n.tI++]=e,s[e]=l,s[e.substring(1)]=l,null!=r&&t(r.token,n.t)),l}function L(e,...n){let t=l===typeof e,r=null!=e&&(s===typeof e||t);for(let o of n){let n=l===typeof o,i=null!=o&&(s===typeof o||n);if(r&&i&&!n&&Array.isArray(e)===Array.isArray(o))for(let t in o)e[t]=L(e[t],o[t]);else e=void 0===o?e:n?o:i?L(Array.isArray(o)?[]:{},o):o,t=l===typeof e,r=null!=e&&(s===typeof e||t)}return e}function P(e){return L(Object.create(Object.getPrototypeOf(e)),e)}function R(...e){return e.filter(e=>!1!==e).map(e=>"object"==typeof e?n(e).join(""):e).join("").split("").reduce((e,n)=>(e[n]=n.charCodeAt(0),e),{})}function M(e){return e.reduce((e,n)=>e<n.length?n.length:e,0)}function B(e){e.stack&&(e.stack=e.stack.split("\n").filter(e=>!e.includes("jsonic/jsonic")).map(e=>e.replace(/    at /,"at ")).join("\n"))}function D(e){if("number"==typeof e.log){let n=!1,t=e.log;-1===t&&(t=1,n=!0),e.log=(...r)=>{if(n){let n=r.filter(e=>s!=typeof e).map(e=>l==typeof e?e.name:e).join("\t");e.opts.debug.get_console().log(n)}else e.opts.debug.get_console().dir(r,{depth:t})}}return e.log}function U(e,n,t){let r=r=>{let s=e(r);if(n===s.tin){let e={};throw null!=s.use&&(e.use=s.use),new y(s.why||i,e,s,r,t)}return s};return r.src=e.src,r}function J(e,n){return(n=new String(e)).esc=!0,n}function $(e,...n){return new RegExp(n.map(e=>e.esc?e.replace(/[-\\|\]{}()[^$+*?.!=]/g,"\\$&"):e).join(""),e)}function F(e,t){let r=n(n(t).reduce((e,n)=>(e[n[0]]=1,e),{...e})).join(""),s=Object.entries(n(t).filter(e=>1<e.length).reduce((e,n)=>((e[n[0]]=e[n[0]]||[]).push(n.substring(1)),e),{})).reduce((e,n)=>(e.push([n[0],n[1].map(e=>$("",J(e)).source).join("|")]),e),[]).map(e=>["|(",J(e[0]),"(?!(",e[1],")))"]).flat(1);return $("","^(([^",J(r),"]+)",...s,")+")}function Z(e,n,t,r,s,o){return e.replace(/\$([\w_]+)/g,(e,l)=>JSON.stringify("code"===l?n:t[l]||(o.meta?o.meta[l]:void 0)||r[l]||s[l]||o[l]||o.opts[l]||o.cnfg[l]||"$"+l))}function W(e,n,t){let r=0<t.loc?t.loc:0,s=0<t.row?t.row:0,o=0<t.col?t.col:0,l=null==t.src?"":t.src,i=e.substring(Math.max(0,r-333),r).split("\n"),a=e.substring(r,r+333).split("\n"),c=2+(""+(s+2)).length,u=s<2?0:s-2,p=e=>"\x1b[34m"+(""+u++).padStart(c," ")+" | \x1b[0m"+(null==e?"":e),d=i.length;return[2<d?p(i[d-3]):null,1<d?p(i[d-2]):null,p(i[d-1]+a[0])," ".repeat(c)+"   "+" ".repeat(o)+"\x1b[31m"+"^".repeat(l.length||1)+" "+n+"\x1b[0m",p(a[1]),p(a[2])].filter(e=>null!=e).join("\n")}function Y(e){return{start:function(n,t,r,s,o){try{return e.start(n,t,r,s,o)}catch(l){if("SyntaxError"===l.name){let n=0,o=0,i=0,a="",c=l.message.match(/^Unexpected token (.) .*position\s+(\d+)/i);if(c){a=c[1],n=parseInt(c[2]),o=t.substring(0,n).replace(/[^\n]/g,"").length;let e=n-1;for(;-1<e&&"\n"!==t.charAt(e);)e--;i=Math.max(t.substring(e,n).length,0)}let u=l.token||{tin:r.token.UK,loc:n,len:a.length,row:l.lineNumber||o,col:l.columnNumber||i,val:void 0,src:a};throw new y(l.code||"json",l.details||{msg:l.message},u,{},l.ctx||{uI:-1,opts:r.options,cnfg:{t:{}},token:u,meta:s,src:()=>t,root:()=>{},plgn:()=>r.internal().plugins,rule:S,xs:-1,v2:u,v1:u,t0:u,t1:u,tC:-1,rs:[],next:()=>u,rsm:{},n:{},log:s?s.log:void 0,F:I(r.internal().config),use:{}})}throw l}}}}function H(e,n,t,r,s){t={...t};let o=s.opts,i=s.meta,a=Z(o.error[e]||o.error.unknown,e,n,t,r,s);l===typeof o.hint&&(o.hint={...o.hint(),...o.hint});let c=["\x1b[31m[jsonic/"+e+"]:\x1b[0m "+a,"  \x1b[34m--\x3e\x1b[0m "+(i&&i.fileName||"<no-file>")+":"+t.row+":"+t.col,W(s.src(),a,t),Z((o.hint[e]||o.hint.unknown).replace(/^([^ ])/," $1").split("\n").map((e,n)=>(0===n?" ":"  ")+e).join("\n"),e,n,t,r,s),"  \x1b[2mhttps://jsonic.richardrodger.com\x1b[0m","  \x1b[2m--internal: rule="+r.name+"~"+k[r.state]+"; token="+s.cnfg.t[t.tin]+(null==t.why?"":"~"+t.why)+"; plugins="+s.plgn().map(e=>e.name).join(",")+"--\x1b[0m\n"].join("\n"),u={internal:{token:t,ctx:s}};return{...Object.create(u),message:c,code:e,details:n,meta:i,fileName:i?i.fileName:void 0,lineNumber:t.row,columnNumber:t.col}}function X(e,t){let r=n(t.token);r.forEach(n=>E(n,e));let s=r.filter(e=>null!=t.token[e].c);e.sm=s.reduce((n,r)=>(n[t.token[r].c]=e.t[r],n),{});let l=r.filter(e=>o===typeof t.token[e]);e.m=l.reduce((n,r)=>(n[r.substring(1)]=t.token[r].split("").reduce((n,t)=>(n[t]=e.t[r],n),{}),n),{});let i=r.filter(e=>null!=t.token[e].s);if(e.ts=i.reduce((n,r)=>(n[r.substring(1)]=t.token[r].s.split(",").reduce((n,t)=>(n[e.t[t]]=t,n),{}),n),{}),e.vm=t.value.src,e.vs=n(t.value.src).reduce((e,n)=>(e[n[0]]=!0,e),{}),e.cs={},e.esc=n(t.string.escape).reduce((e,n)=>(e[n]=t.string.escape[n],e),{}),e.cs.cs={},e.cmk=[],t.comment.lex){e.cm=t.comment.marker;let r=n(e.cm);r.forEach(n=>{1===n.length?e.cs.cs[n]=n.charCodeAt(0):(e.cs.cs[n[0]]=n.charCodeAt(0),e.cmk.push(n))}),e.cmx=M(r)}e.sc=n(e.sm).join(""),e.cs.dig=R(t.number.digital),e.cs.mln=R(t.string.multiline),e.cs.vend=R(t.space.lex&&e.m.SP,t.line.lex&&e.m.LN,e.sc,t.comment.lex&&e.cs.cs,t.block.lex&&e.cs.bs),e.cs.bs={},e.bmk=[];let a=n(t.block.marker);a.forEach(n=>{e.cs.bs[n[0]]=n.charCodeAt(0),e.bmk.push(n)}),e.bmx=M(a);let c=null!=t.number.sep?new RegExp(t.number.sep,"g"):null;e.re={ns:c,te:F(R(t.space.lex&&e.m.SP,t.line.lex&&e.m.LN,e.sc,t.comment.lex&&e.cs.cs,t.block.lex&&e.cs.bs),{...t.comment.lex?e.cm:{},...t.block.lex?t.block.marker:{}}),nm:new RegExp(["^[-+]?(0(",[t.number.hex?"x[0-9a-fA-F_]+":null,t.number.oct?"o[0-7_]+":null,t.number.bin?"b[01_]+":null].filter(e=>null!=e).join("|"),")|[0-9]+([0-9_]*[0-9])?)","(\\.[0-9]+([0-9_]*[0-9])?)?","([eE][-+]?[0-9]+([0-9_]*[0-9])?)?"].filter(e=>e.replace(/_/g,null==c?"":t.number.sep)).join(""))},e.d=t.debug,n(t.config.modify).forEach(n=>t.config.modify[n](e,t)),t.debug.print.config&&t.debug.get_console().dir(e,{depth:null})}function G(e=((e,n="replace")=>e[n](/[A-Z]/g,e=>" "+e.toLowerCase())[n](/[~%][a-z]/g,e=>("~"==e[0]?" ":"")+e[1].toUpperCase())),n="~sinceTheErrorIsUnknown,ThisIsProbablyABugInsideJsonic\nitself,OrAPlugin.~pleaseConsiderPostingAGithubIssue -Thanks!|~theCharacter(s) $srcWereNotExpectedAtThisPointAsTheyDoNot\nmatchTheExpectedSyntax,EvenUnderTheRelaxedJsonicRules.~ifIt\nisNotObviouslyWrong,TheActualSyntaxErrorMayBeElsewhere.~try\ncommentingOutLargerAreasAroundThisPointUntilYouGetNoErrors,\nthenRemoveTheCommentsInSmallSectionsUntilYouFindThe\noffendingSyntax.~n%o%t%e:~alsoCheckIfAnyPluginsYouAreUsing\nexpectDifferentSyntaxInThisCase.|~theEscapeSequence $srcDoesNotEncodeAValidUnicodeCodePoint\nnumber.~youMayNeedToValidateYourStringDataManuallyUsingTest\ncodeToSeeHow~javaScriptWillInterpretIt.~alsoConsiderThatYour\ndataMayHaveBecomeCorrupted,OrTheEscapeSequenceHasNotBeen\ngeneratedCorrectly.|~theEscapeSequence $srcDoesNotEncodeAValid~a%s%c%i%iCharacter.~you\nmayNeedToValidateYourStringDataManuallyUsingTestCodeToSee\nhow~javaScriptWillInterpretIt.~alsoConsiderThatYourDataMay\nhaveBecomeCorrupted,OrTheEscapeSequenceHasNotBeenGenerated\ncorrectly.|~stringValuesCannotContainUnprintableCharacters (characterCodes\nbelow 32).~theCharacter $srcIsUnprintable.~youMayNeedToRemove\ntheseCharactersFromYourSourceData.~alsoCheckThatItHasNot\nbecomeCorrupted.|~stringValuesCannotBeMissingTheirFinalQuoteCharacter,Which\nshouldMatchTheirInitialQuoteCharacter.".split("|")){return"unknown|unexpected|invalid_unicode|invalid_ascii|unprintable|unterminated".split("|").reduce((t,r,s)=>(t[r]=e(n[s]),t),{})}e.exports.util=V,e.exports.make=O;let q=O();e.exports.Jsonic=q;let z=q;return delete z.options,delete z.use,delete z.rule,delete z.lex,delete z.token,q.Jsonic=q,q.JsonicError=y,q.Lexer=w,q.Parser=_,q.Rule=j,q.RuleSpec=T,q.Alt=C,q.util=V,q.make=O,e.exports.default=q,e.exports=e.exports.Jsonic,e.exports}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),e=e.exports;var n={};Object.defineProperty(n,"__esModule",{value:!0}),n.RefVal=n.DisjunctVal=n.ConjunctVal=n.MapVal=n.IntegerVal=n.BooleanVal=n.StringVal=n.NumberVal=n.ScalarTypeVal=n.Nil=n.TOP=n.Integer=n.DONE=void 0;n.DONE=-1;const t={top:!0,val:void 0,done:-1,unify(e,n){return e instanceof d||e instanceof p||e instanceof h?e.unify(this):e},get canon(){return"top"},get dc(){return"top"},gen:e=>{}};n.TOP=t;const r=(e,n,r)=>n===t?e:e===t?n:e.constructor===n.constructor?e.val===n.val?e:new o("no-unify-val:["+e.canon+","+n.canon+"]"):n instanceof o?n:e instanceof o?e:n instanceof d||n instanceof p||n instanceof h?n.unify(e,r):new o("no-unify:"+e.canon+","+n.canon);class s{constructor(e){this.done=0,this.val=e}get dc(){return this.canon+"/*d"+this.done+"*/"}}class o extends s{constructor(e){super(),this.why=e,this.done=-1}unify(e,n){return this}get canon(){return"nil:"+this.why}gen(e){e.push("nil")}}n.Nil=o;class l{}n.Integer=l;class i extends s{constructor(e){super(e),this.done=-1}unify(e,n){if(e instanceof a)return e.type===this.val||Number===this.val&&l===e.type?e:new o("no-scalar-unify");if(e instanceof i){if(Number===this.val&&l===e.val)return e;if(Number===e.val&&l===this.val)return this}return r(this,e)}get canon(){return this.val.name.toLowerCase()}gen(e){e.push("ScalarTypeVal<"+this.canon+">")}}n.ScalarTypeVal=i;class a extends s{constructor(e,n){super(e),this.type=n,this.done=-1}unify(e,n){return e instanceof i?e.unify(this):r(this,e)}get canon(){return this.val.toString()}gen(e){return this.val}}n.NumberVal=class extends a{constructor(e){super(e,Number)}unify(e,n){return e instanceof a&&e.type===l?e:super.unify(e)}},n.IntegerVal=class extends a{constructor(e){if(!Number.isInteger(e))throw new Error("not-integer");super(e,l)}unify(e,n){return e instanceof i&&e.val===Number||e instanceof a&&e.type===Number&&this.val===e.val?this:super.unify(e)}},n.StringVal=class extends a{constructor(e){super(e,String)}unify(e,n){return super.unify(e)}get canon(){return JSON.stringify(this.val)}};class c extends a{constructor(e){super(e,Boolean)}unify(e){return super.unify(e)}}n.BooleanVal=c,c.TRUE=new c(!0),c.FALSE=new c(!1);class u extends s{constructor(e){super(e),this.id="v"+(""+Math.random()).substr(3,5)}unify(e,n){let s=!0,o=this;if(-1!==this.done){(o=new u({})).done=this.done+1;for(let e in this.val)o.val[e]=this.val[e].unify(t,n),s=s&&-1===o.val[e].done}if(e instanceof u){let r=e.unify(t,n);for(let e in r.val){let t=r.val[e],l=this.val[e];o.val[e]=void 0===l?t:l.unify(t,n),s=s&&-1===o.val[e].done}return o.done=s?-1:o.done,o}return o.done=s?-1:o.done,r(o,e)}get canon(){return"{"+Object.keys(this.val).map(e=>[JSON.stringify(e)+":"+this.val[e].canon]).join(",")+"}"}gen(e){let n={};for(let t in this.val)n[t]=this.val[t].gen(e);return n}}n.MapVal=u;class p extends s{constructor(e){super(e)}append(e){return new p([...this.val,e])}prepend(e){return new p([e,...this.val])}unify(e,n){let t=!0,r=[];for(let c=0;c<this.val.length;c++)if(r[c]=this.val[c].unify(e,n),t=t&&-1===r[c].done,r[c]instanceof o)return new o("&peer["+r[c].canon+","+e.canon+"]");let s,l=0<r.length?[r[0]]:[],i=0;for(let c=1;c<r.length;c++)if(l[i]instanceof p)l.splice(i,0,...l[i].val),i+=l[i].val.length,t=!1;else if(l[i]=null==l[i]?r[c]:l[i].unify(r[c],n),t=t&&-1===l[i].done,l[i]instanceof o)return new o("&reduce["+l[i].canon+","+r[c].canon+"]");let a="";return 0===l.length?(s=new o("&empty"),a+="A"):1===l.length?(s=l[0],a+="B"):(s=new p(l),a+="C"),s.done=t?-1:this.done+1,s}get canon(){return this.val.map(e=>e.canon).join("&")}gen(e){if(0<this.val.length){let n=this.val[0],t=void 0;return void 0===n||n instanceof o?e.push("nil:|:none="+this.canon):t=n.gen(e),t}e.push("nil:|:empty="+this.canon)}}n.ConjunctVal=p;class d extends s{constructor(e){super(e)}append(e){return new d([...this.val,e])}prepend(e){return new d([e,...this.val])}unify(e,n){let t=[];for(let r=0;r<this.val.length;r++)t[r]=this.val[r].unify(e,n);return t=t.filter(e=>!(e instanceof o)),new d(t)}get canon(){return this.val.map(e=>e.canon).join("|")}gen(e){if(0<this.val.length){let n=this.val[0],t=void 0;return void 0===n||n instanceof o?e.push("nil:|:none="+this.canon):t=n.gen(e),t}e.push("nil:|:empty="+this.canon)}}n.DisjunctVal=d;class h extends s{constructor(e){super(e),this.parts=e.split("/").filter(e=>""!=e),this.absolute=e.startsWith("/")}append(e){this.parts.push(e),this.val=(this.absolute?"/":"")+this.parts.join("/")}unify(e,n){let r,s=null==n?this:n.find(this)||this;return(r=s instanceof h?t===e?new h(this.val):e instanceof o?new o("ref["+this.val+"]"):new p([this,e]):s.unify(e,n)).done=-1===r.done?-1:this.done+1,r}get canon(){return this.val}gen(e){e.push(this.canon)}}n.RefVal=h;var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.Lang=void 0;let g=function(t){t.options({value:{src:{string:()=>new n.ScalarTypeVal(String),number:()=>new n.ScalarTypeVal(Number),integer:()=>new n.ScalarTypeVal(n.Integer),boolean:()=>new n.ScalarTypeVal(Boolean),nil:()=>new n.Nil,top:()=>n.TOP}},token:{"#A&":{c:"&"},"#A|":{c:"|"},"#A/":{c:"/"}},map:{merge:(e,t)=>{let r=e,s=t;return new n.ConjunctVal([r,s])}}});let r=t.token.NR,s=t.token.TX,o=t.token.ST,l=t.token.VL,i=t.token.OB,a=t.token.OS,c=t.token["#A&"],u=t.token["#A|"],p=t.token["#A/"];t.rule("expr",()=>new e.RuleSpec({open:[{s:[[c,u]],p:"disjunct",b:1,n:{expr:1}}],close:[{s:[]}],bo:e=>e.node={t:e.node},ac:e=>{e.node=e.child.node.o}})),t.rule("disjunct",()=>new e.RuleSpec({open:[{s:[c],p:"conjunct",b:1},{s:[u,[r,s,o,l,i,a]],b:1,p:"val",a:e=>{e.node.o=e.node.o instanceof n.DisjunctVal?e.node.o:new n.DisjunctVal([e.node.t])}}],close:[{s:[u],r:"disjunct",b:1,a:e=>{var n;let t=(null===(n=e.child.node)||void 0===n?void 0:n.o)||e.child.node;e.node.t=t}},{s:[c],r:"disjunct",b:1,a:e=>{var n;let t=(null===(n=e.child.node)||void 0===n?void 0:n.o)||e.child.node;e.node.t=t,e.child.node=null}},{}],ac:e=>{var t;let r=(null===(t=e.child.node)||void 0===t?void 0:t.o)||e.child.node;r&&(e.node.o instanceof n.DisjunctVal?e.node.o.val.push(r):e.node.o=r)}})),t.rule("conjunct",()=>new e.RuleSpec({open:[{s:[c,[r,s,o,l,i,a,p]],b:1,p:"val",a:e=>{e.node={o:e.node.o instanceof n.ConjunctVal?e.node.o:new n.ConjunctVal([e.node.t])}}}],close:[{s:[c],r:"conjunct",b:1},{}],ac:e=>{var t;let r=(null===(t=e.child.node)||void 0===t?void 0:t.o)||e.child.node;r&&(e.node.o instanceof n.ConjunctVal?e.node.o.val.push(r):e.node.o=r)}})),t.rule("path",()=>new e.RuleSpec({open:[{s:[p,[s,o,r,l]],p:"part",b:2}],bo:e=>e.node=new n.RefVal("/")})),t.rule("part",()=>new e.RuleSpec({open:[{s:[p,[s,o,r,l]],r:"part",a:e=>{e.node.append(e.open[1].src)}},{}]})),t.rule("val",e=>{e.def.open.unshift({s:[p,[s,o,r,l]],p:"path",b:2}),e.def.close.unshift({s:[[c,u]],p:"expr",b:1,c:e=>null==e.n.expr||0===e.n.expr});let t=e.def.bc;return e.def.bc=function(e,r){let s=t.call(this,e,r),o=e.node,l=typeof o;return"string"===l?o=new n.StringVal(e.node):"number"===l?o=Number.isInteger(e.node)?new n.IntegerVal(e.node):new n.NumberVal(e.node):"boolean"===l&&(o=new n.BooleanVal(e.node)),e.node=o,s},e}),t.rule("map",e=>{let t=e.def.bc;return e.def.bc=function(e,r){let s=t?t.call(this,e,r):void 0;return e.node=new n.MapVal(e.node),s},e})};f.Lang=class{constructor(n){this.jsonic=e.Jsonic.make().use(g)}parse(e,n){let t={};return n&&null!=n.log&&Number.isInteger(n.log)&&(t.log=n.log),Array.isArray(e)?e.map(e=>this.jsonic(e,t)):this.jsonic(e,t)}};var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.Unify=void 0;class b{constructor(e){this.root=e.root}find(e){if(e.absolute){let t=this.root,r=0;for(;r<e.parts.length&&t instanceof n.MapVal;r++){let n=e.parts[r];t=t.val[n]}if(r===e.parts.length)return t}}}m.Unify=class{constructor(e,t){this.dc=0,this.lang=t||new f.Lang,"string"==typeof e&&(e=this.lang.parse(e)),this.root=e,this.res=e;let r,s=e;for(;this.dc<111&&n.DONE!==s.done;)r=new b({root:s}),s=s.unify(n.TOP,r),this.dc++;this.res=s}};var v={};function x(e,n){let t=y.options(e,n),r=new f.Lang(t).parse(t.src);return new m.Unify(r).res}Object.defineProperty(v,"__esModule",{value:!0}),v.util=v.Aontu=void 0,v.Aontu=x;const y={options:(e,n)=>({src:"",print:0,..."string"==typeof e?{src:e}:e,...n||{}})};return v.util=y,v.default=x,v}));